// Generated by CoffeeScript 1.6.3
(function() {
  $().ready(function() {
    var blank_tiles, get_rack_order, get_tile, get_word_from_tiles;
    $('#submit_word').on('click', function(event) {
      event.preventDefault();
      $('#word').val(get_word_from_tiles());
      $('#rack').val(get_rack_order());
      return $('#word_form').submit();
    });
    $('#submit_replace_word').on('click', function(event) {
      event.preventDefault();
      $('#rack').val(get_rack_order());
      $('#replace').val(get_word_from_tiles());
      return $('#word_form').submit();
    });
    get_tile = function() {
      return $('#word_form').find('.tile');
    };
    get_word_from_tiles = function(word) {
      var tile, tiles, _i, _len;
      word = '';
      tiles = get_tile();
      for (_i = 0, _len = tiles.length; _i < _len; _i++) {
        tile = tiles[_i];
        if ($(tile).hasClass('active')) {
          word += $(tile).data('letter');
        }
      }
      return word;
    };
    $("#sortable").sortable(function() {
      return {
        revert: true
      };
    });
    blank_tiles = function(that) {
      var letter;
      letter = $(that).html();
      if (letter !== "_") {
        $(that).html("_");
        $(that).css("text-decoration", "underline");
      }
      $(".blank-box").select();
      return $(document).keypress(function(e) {
        letter = String.fromCharCode(e.which);
        $(that).html(letter);
        return $(that).attr("data-letter", letter);
      });
    };
    $('.blank').on('touchstart', function() {
      return blank_tiles(this);
    });
    $('.blank').on('click', function() {
      return blank_tiles(this);
    });
    return get_rack_order = function() {
      var blank, letter, rack, tile, tiles, _i, _len;
      tiles = get_tile();
      rack = [];
      for (_i = 0, _len = tiles.length; _i < _len; _i++) {
        tile = tiles[_i];
        letter = $(tile).data('letter');
        blank = $(tile).data('blank');
        rack[_i] = {
          letter: letter,
          blank: blank
        };
      }
      return JSON.stringify(rack);
    };
  });

}).call(this);

/*
//@ sourceMappingURL=scrabble_support.map
*/
